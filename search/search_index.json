{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"About","text":"<p>The Feldfreund Dev Kit is an open-source platform for autonomous outdoor robotics developed by Zauberzeug GmbH. Built on RoSys, an all-Python robot system framework with built-in simulation, hardware abstraction, and a real-time web interface via NiceGUI. Time-critical and safety-critical behavior runs on the microcontroller via Lizard, a domain-specific language for embedded hardware control.</p> <p>Our agricultural weeding robot Feldfreund is based on this platform and is intended to advance organic and regenerative agriculture.</p> <p>This documentation is currently work in progress while we expand this library.</p> <p>Stay tuned and please report any issues on Github.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Open Source \u2014 modify and enhance the software to fit your specific needs.</li> <li>Modular Design \u2014 equip with tools from Zauberzeug, third-party solutions, or custom developments.</li> <li>ROS2 Support \u2014 a ROS2 implementation is available.</li> </ul>"},{"location":"getting_started/","title":"Getting Started","text":""},{"location":"getting_started/#installation","title":"Installation","text":"<p>Clone the repository and install dependencies with uv:</p> <pre><code>git clone https://github.com/zauberzeug/feldfreund_devkit.git\ncd feldfreund_devkit\nuv sync\n</code></pre>"},{"location":"getting_started/#running-the-example","title":"Running the Example","text":"<p>The repository includes a minimal example in <code>main.py</code> that demonstrates:</p> <ul> <li>Robot simulation with keyboard control</li> <li>Straight line navigation automation</li> <li>Real-time 3D visualization</li> </ul> <p>Start it with:</p> <pre><code>uv run main.py\n</code></pre> <p>Open http://localhost:8080 in your browser. Hold SHIFT and use the arrow keys to steer the robot, or use the automation controls to run a straight line navigation.</p>"},{"location":"getting_started/#understanding-the-example","title":"Understanding the Example","text":"<pre><code>#! /usr/bin/env python\nimport rosys\nfrom nicegui import app, ui\nfrom rosys.automation import Automator, automation_controls\nfrom rosys.driving import Driver, Steerer, keyboard_control, robot_object\n\nimport feldfreund_devkit\nfrom feldfreund_devkit.config import FeldfreundConfiguration, config_from_id\nfrom feldfreund_devkit.implement import ImplementDummy\nfrom feldfreund_devkit.navigation import StraightLineNavigation\n\n\nclass System(feldfreund_devkit.System):\n    def __init__(self, config: FeldfreundConfiguration) -&gt; None:\n        super().__init__(config)\n        self.steerer = Steerer(self.feldfreund.wheels, speed_scaling=0.25)\n        self.driver = Driver(self.feldfreund.wheels, self.odometer, parameters=self.config.driver)\n        self.shape = rosys.geometry.Prism.default_robot_shape()\n        self.navigation = StraightLineNavigation(implement=ImplementDummy(),\n                                                 driver=self.driver,\n                                                 pose_provider=self.odometer)\n        self.automator = Automator(self.steerer, on_interrupt=self.feldfreund.stop, notify=False)\n        self.automator.default_automation = self.navigation.start\n\n        @ui.page('/')\n        def ui_content() -&gt; None:\n            keyboard_control(self.steerer)\n            with ui.scene():\n                robot_object(self.shape, self.odometer)\n            with ui.card():\n                ui.label('hold SHIFT to steer with the keyboard arrow keys or use the automation controls')\n                with ui.row():\n                    self.navigation.settings_ui()\n                with ui.row():\n                    automation_controls(self.automator)\n\n\ndef startup() -&gt; None:\n    config = config_from_id('example')\n    System(config).persistent()\n\n\napp.on_startup(startup)\n\nui.run(title='Feldfreund_devkit')\n</code></pre> <p>The <code>System</code> class extends <code>feldfreund_devkit.System</code> which initializes the robot hardware (or simulation) based on the configuration. Key components:</p> <ul> <li>config: Loaded from <code>config/example.py</code> via <code>config_from_id('example')</code></li> <li>steerer: Manual steering control</li> <li>driver: Path-following driver for automations</li> <li>navigation: <code>StraightLineNavigation</code> drives forward for a configurable distance</li> <li>automator: Manages automation lifecycle (play/pause/stop)</li> </ul>"},{"location":"getting_started/#configuration","title":"Configuration","text":"<p>Robot configurations live in the <code>config/</code> directory. See <code>config/example.py</code>:</p> <pre><code>from feldfreund_devkit.config import (\n    BluetoothConfiguration,\n    BumperConfiguration,\n    CameraConfiguration,\n    CircleSightPositions,\n    FeldfreundConfiguration,\n    FlashlightConfiguration,\n    GnssConfiguration,\n    RobotBrainConfiguration,\n    TracksConfiguration,\n)\n\nconfig = FeldfreundConfiguration(\n    robot_id='Example',\n    bluetooth=BluetoothConfiguration(name='example', pin_code=123456),\n    bumper=BumperConfiguration(pin_front_top=21, pin_front_bottom=35, pin_back=18),\n    camera=CameraConfiguration(width=1280, height=720, fps=10),\n    circle_sight_positions=CircleSightPositions(right='-1', left='-2', front='-4', back='-3'),\n    flashlight=FlashlightConfiguration(),\n    gnss=GnssConfiguration(),\n    implement=None,\n    imu=None,\n    robot_brain=RobotBrainConfiguration(name='rbexample', flash_params=['orin', 'v05', 'nand']),\n    wheels=TracksConfiguration(is_left_reversed=True,\n                               is_right_reversed=False,\n                               left_back_can_address=0x000,\n                               left_front_can_address=0x100,\n                               right_back_can_address=0x200,\n                               right_front_can_address=0x300,\n                               odrive_version=6),\n)\n</code></pre> <p>In simulation mode (when no hardware is detected), mock implementations are used automatically.</p>"},{"location":"getting_started/#next-steps","title":"Next Steps","text":"<ul> <li>Browse the Module Reference in the navigation for API documentation</li> <li>Check the Tutorials for hardware calibration guides</li> <li>See Troubleshooting for common issues</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>This section provides guidance for diagnosing and resolving issues during operation. If your issue is not listed here, you can also check the RoSys documentation.</p>"},{"location":"troubleshooting/#logs","title":"Logs","text":"<p>Check the logs for warnings or errors. Archived logs are stored in the <code>~/.rosys</code> directory.</p> <p>For more detail, enable debug-level logging on the RoSys Logging Page available at /logging.</p>"},{"location":"troubleshooting/#permission-denied-directly-after-startup","title":"Permission denied directly after startup","text":"<p>If you get the <code>[Errno 13] Permission denied</code> error message right after you started <code>main.py</code>, your system is probably blocking the default port 80. Set a custom port via environment variable:</p> <pre><code>PORT=8080 uv run ./main.py\n</code></pre> <p>Or add it to a <code>.env</code> file:</p> <pre><code>ROBOT_ID=my_robot\nPORT=8080\n</code></pre>"},{"location":"reference/SUMMARY/","title":"SUMMARY","text":"<ul> <li>api</li> <li>config</li> <li>hardware</li> <li>interface<ul> <li>components</li> </ul> </li> <li>navigation</li> </ul>"},{"location":"reference/feldfreund_devkit/api/","title":"api","text":""},{"location":"reference/feldfreund_devkit/api/#feldfreund_devkit.api.Online","title":"Online","text":"<pre><code>Online()\n</code></pre> <p>API endpoints for checking the robot's online status.</p> <ul> <li><code>GET /api/online</code> \u2192 <code>{'online': True | False}</code></li> </ul>"},{"location":"reference/feldfreund_devkit/config/","title":"config","text":""},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.BatteryControlConfiguration","title":"BatteryControlConfiguration  <code>dataclass</code>","text":"<pre><code>BatteryControlConfiguration(\n    *,\n    name: str = \"battery_control\",\n    on_expander: bool = True,\n    reset_pin: int = 15,\n    status_pin: int = 13\n)\n</code></pre> <p>Configuration for the battery control of the Feldfreund robot.</p> Defaults <p>name: 'battery_control' on_expander: True reset_pin: 15 status_pin: 13</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.BluetoothConfiguration","title":"BluetoothConfiguration  <code>dataclass</code>","text":"<pre><code>BluetoothConfiguration(\n    *,\n    name: str = \"bluetooth\",\n    pin_code: int | None | Literal[\"default\"] = \"default\"\n)\n</code></pre> <p>Configuration for the Lizard Bluetooth module.</p> Defaults <p>name: 'bluetooth' pin_code: 'default'</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.BmsConfiguration","title":"BmsConfiguration  <code>dataclass</code>","text":"<pre><code>BmsConfiguration(\n    *,\n    name: str = \"bms\",\n    on_expander: bool = True,\n    rx_pin: int = 26,\n    tx_pin: int = 27,\n    baud: int = 9600,\n    num: int = 2,\n    battery_low_threshold: float = 15.0\n)\n</code></pre> <p>Configuration for the bms of the Feldfreund robot.</p> Defaults <p>name: 'bms' on_expander: True rx_pin: 26 tx_pin: 27 baud: 9600 num: 2 battery_low_threshold: 15.0</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.BumperConfiguration","title":"BumperConfiguration  <code>dataclass</code>","text":"<pre><code>BumperConfiguration(\n    *,\n    pin_front_top: int,\n    pin_front_bottom: int,\n    pin_back: int,\n    name: str = \"bumper\",\n    on_expander: bool = True\n)\n</code></pre> <p>Configuration for the bumper of the Feldfreund robot.</p> Defaults <p>name: 'bumper' on_expander: True</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.CameraConfiguration","title":"CameraConfiguration  <code>dataclass</code>","text":"<pre><code>CameraConfiguration(\n    *,\n    width: int,\n    height: int,\n    camera_type: Literal[\n        \"CalibratableUsbCamera\"\n    ] = \"CalibratableUsbCamera\",\n    auto_exposure: bool = True,\n    rotation: int = 0,\n    fps: int = 10,\n    crop: CropConfiguration | None = None\n)\n</code></pre> <p>Configuration for the camera of the Feldfreund robot.</p> Defaults <p>camera_type: 'CalibratableUsbCamera' auto_exposure: True rotation: 0 fps: 10 crop: None</p>"},{"location":"reference/feldfreund_devkit/config/#attributes-properties","title":"Attributes &amp; Properties","text":"Name Type Description <code>crop_rectangle</code> <code>rosys.geometry.rectangle.Rectangle | None</code> Get a rectangle based on the crop values (left, right, up, down) of the config"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.CanConfiguration","title":"CanConfiguration  <code>dataclass</code>","text":"<pre><code>CanConfiguration(\n    *,\n    name: str = \"can\",\n    on_expander: bool = False,\n    rx_pin: int = 32,\n    tx_pin: int = 33,\n    baud: int = 1000000\n)\n</code></pre> <p>Configuration for the can of the Feldfreund robot.</p> Defaults <p>name: 'can' on_expander: False rx_pin: 32 tx_pin: 33 baud: 1_000_000</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.CircleSightPositions","title":"CircleSightPositions  <code>dataclass</code>","text":"<pre><code>CircleSightPositions(\n    *,\n    right: str = \"-1\",\n    back: str = \"-2\",\n    front: str = \"-3\",\n    left: str = \"-4\"\n)\n</code></pre> <p>Configuration for the positions of the 4 cameras.</p> Defaults <p>right = '-1' back = '-2' front = '-3' left = '-4'</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.CropConfiguration","title":"CropConfiguration  <code>dataclass</code>","text":"<pre><code>CropConfiguration(\n    *, left: int, right: int, up: int, down: int\n)\n</code></pre> <p>Configuration for the cropping of the camera of the Feldfreund robot.</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.EstopConfiguration","title":"EstopConfiguration  <code>dataclass</code>","text":"<pre><code>EstopConfiguration(\n    *,\n    name: str = \"estop\",\n    pin_front: int = 34,\n    pin_back: int = 35\n)\n</code></pre> <p>Configuration for the estop of the Feldfreund robot.</p> Defaults <p>name: 'estop' pin_front: 34 pin_back: 35</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.FeldfreundConfiguration","title":"FeldfreundConfiguration  <code>dataclass</code>","text":"<pre><code>FeldfreundConfiguration(\n    *,\n    robot_id: str,\n    battery_control: BatteryControlConfiguration = BatteryControlConfiguration(),\n    bluetooth: BluetoothConfiguration = BluetoothConfiguration(),\n    bms: BmsConfiguration = BmsConfiguration(),\n    bumper: BumperConfiguration | None = None,\n    can: CanConfiguration = CanConfiguration(),\n    camera: CameraConfiguration | None = None,\n    circle_sight_positions: CircleSightPositions | None,\n    driver: DriveParameters = create_drive_parameters(),\n    estop: EstopConfiguration = EstopConfiguration(),\n    flashlight: (\n        FlashlightConfiguration\n        | FlashlightMosfetConfiguration\n        | None\n    ) = None,\n    gnss: GnssConfiguration | None = None,\n    implement: ImplementConfiguration | None = None,\n    imu: ImuConfiguration | None = None,\n    robot_brain: RobotBrainConfiguration,\n    wheels: TracksConfiguration\n)\n</code></pre> <p>Main configuration for a Feldfreund robot combining all module configurations.</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.FlashlightConfiguration","title":"FlashlightConfiguration  <code>dataclass</code>","text":"<pre><code>FlashlightConfiguration(\n    *,\n    name: str = \"flashlight\",\n    on_expander: bool = True,\n    front_pin: int = 12,\n    back_pin: int = 23\n)\n</code></pre> <p>Configuration for the flashlight of the Feldfreund robot.</p> Defaults <p>name: 'flashlight' on_expander: True front_pin: 12 back_pin: 23</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.FlashlightMosfetConfiguration","title":"FlashlightMosfetConfiguration  <code>dataclass</code>","text":"<pre><code>FlashlightMosfetConfiguration(\n    *,\n    name: str = \"flashlight_mosfet\",\n    on_expander: bool = True,\n    pin: int = 2\n)\n</code></pre> <p>Configuration for the mosfet based flashlight of the Feldfreund robot.</p> Defaults <p>name: str = 'flashlight_mosfet' on_expander: True pin: 2</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.GnssConfiguration","title":"GnssConfiguration  <code>dataclass</code>","text":"<pre><code>GnssConfiguration(\n    *,\n    x: float = 0.041,\n    y: float = -0.255,\n    z: float = 0.6225,\n    yaw: float = 0.0\n)\n</code></pre> <p>Configuration for the GNSS of the Feldfreund robot.</p> <p>X, Y, Z are the position of the main GNSS antenna. The yaw is the direction to the auxiliary antenna. It should be 90\u00b0, but the offset is configured in the Septentrio software.</p> Defaults <p>x: 0.041 y: -0.255 z: 0.6225 yaw: 0.0</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.ImplementConfiguration","title":"ImplementConfiguration  <code>dataclass</code>","text":"<pre><code>ImplementConfiguration(\n    *,\n    lizard_name: str,\n    display_name: str,\n    offset: Pose3d = Pose3d.zero(),\n    work_radius: float\n)\n</code></pre> <p>Base configuration for all implements.</p> Defaults <p>offset: Pose3d.zero</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.ImuConfiguration","title":"ImuConfiguration  <code>dataclass</code>","text":"<pre><code>ImuConfiguration(\n    *,\n    name: str = \"imu\",\n    offset_rotation: Rotation = Rotation.zero(),\n    min_gyro_calibration: float = 1.0\n)\n</code></pre> <p>Configuration for the IMU of the Feldfreund robot.</p> Defaults <p>name: 'imu' offset_rotation: Rotation.zero min_gyro_calibration: 1.0</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.RobotBrainConfiguration","title":"RobotBrainConfiguration  <code>dataclass</code>","text":"<pre><code>RobotBrainConfiguration(\n    *,\n    name: str,\n    flash_params: list[str],\n    enable_esp_on_startup: bool = False,\n    use_espresso: bool = True\n)\n</code></pre> <p>Configuration for the robot brain of the Feldfreund robot.</p> Defaults <p>enable_esp_on_startup: False use_espresso: True</p>"},{"location":"reference/feldfreund_devkit/config/#feldfreund_devkit.config.TracksConfiguration","title":"TracksConfiguration  <code>dataclass</code>","text":"<pre><code>TracksConfiguration(\n    *,\n    name: str = \"wheels\",\n    is_left_reversed: bool = False,\n    is_right_reversed: bool = False,\n    left_back_can_address: int = 0,\n    right_back_can_address: int = 256,\n    left_front_can_address: int = 512,\n    right_front_can_address: int = 768,\n    odrive_version: int = 4,\n    width: float = 0.502,\n    tooth_count: int = 15,\n    pitch: float = 0.033,\n    motor_gear_ratio: float = 12.52,\n    has_temperature_sensor: bool = False\n)\n</code></pre> <p>Configuration for the tracks of the Feldfreund robot.</p> Defaults <p>name: 'wheels' is_left_reversed: False is_right_reversed: False left_back_can_address: 0x000 right_back_can_address: 0x100 left_front_can_address: 0x200 right_front_can_address: 0x300 odrive_version: 4 width: 0.502 tooth_count: 15 pitch: 0.033 motor_gear_ratio: 12.52 has_temperature_sensor: False</p>"},{"location":"reference/feldfreund_devkit/hardware/","title":"hardware","text":""},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.CanOpenMasterHardware","title":"CanOpenMasterHardware","text":"<pre><code>CanOpenMasterHardware(\n    robot_brain: RobotBrain,\n    *,\n    can: CanHardware,\n    name: str = \"master\",\n    sync_interval: int = 5\n)\n</code></pre> <p>               Bases: <code>ModuleHardware</code></p> <p>RoSys module to control the CANOpen master Lizard module.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.Flashlight","title":"Flashlight","text":"<pre><code>Flashlight(**kwargs)\n</code></pre> <p>               Bases: <code>Module</code>, <code>ABC</code></p> <p>Base class for flashlight modules with on/off and duty cycle control.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.Flashlight.set_duty_cycle","title":"set_duty_cycle  <code>async</code>","text":"<pre><code>set_duty_cycle(duty_cycle: float) -&gt; None\n</code></pre> <p>Set the duty cycle of the flashlight.</p> <p>:param duty_cycle: float between 0 and 1 :raises ValueError: if duty cycle is not between 0 and 1</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightHardware","title":"FlashlightHardware","text":"<pre><code>FlashlightHardware(\n    config: FlashlightConfiguration,\n    robot_brain: RobotBrain,\n    *,\n    expander: ExpanderHardware | None\n)\n</code></pre> <p>               Bases: <code>Flashlight</code>, <code>ModuleHardware</code>, <code>SafetyMixin</code></p> <p>Flashlight hardware implementation using PWM outputs.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightHardware.set_duty_cycle","title":"set_duty_cycle  <code>async</code>","text":"<pre><code>set_duty_cycle(duty_cycle: float) -&gt; None\n</code></pre> <p>Set the duty cycle of the flashlight if the robot brain is ready.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightHardware.turn_off","title":"turn_off  <code>async</code>","text":"<pre><code>turn_off() -&gt; None\n</code></pre> <p>Turn off the flashlight if the robot brain is ready.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightHardware.turn_on","title":"turn_on  <code>async</code>","text":"<pre><code>turn_on() -&gt; None\n</code></pre> <p>Turn on the flashlight if the robot brain is ready.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightHardwareMosfet","title":"FlashlightHardwareMosfet","text":"<pre><code>FlashlightHardwareMosfet(\n    config: FlashlightMosfetConfiguration,\n    robot_brain: RobotBrain,\n    bms: Bms,\n    *,\n    expander: ExpanderHardware | None\n)\n</code></pre> <p>               Bases: <code>Flashlight</code>, <code>ModuleHardware</code>, <code>SafetyMixin</code></p> <p>Flashlight hardware implementation using a MOSFET switch.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.FlashlightSimulation","title":"FlashlightSimulation","text":"<pre><code>FlashlightSimulation(**kwargs)\n</code></pre> <p>               Bases: <code>Flashlight</code>, <code>ModuleSimulation</code></p> <p>Simulated flashlight for testing.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.Safety","title":"Safety","text":"<pre><code>Safety(\n    *,\n    wheels: Wheels,\n    estop: EStop,\n    bumper: Bumper | None = None,\n    modules: list[SafetyMixin] | None = None\n)\n</code></pre> <p>               Bases: <code>ABC</code></p> <p>Coordinates safety behavior across wheels, estop, bumper, and registered modules.</p> <p>Modules implementing <code>SafetyMixin</code> can be registered via <code>add_module()</code> to have their enable/disable code automatically called when the safety state changes.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.Safety.add_module","title":"add_module","text":"<pre><code>add_module(module: SafetyMixin) -&gt; None\n</code></pre> <p>Register a module to be enabled/disabled with the safety system.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.SafetyHardware","title":"SafetyHardware","text":"<pre><code>SafetyHardware(robot_brain: RobotBrain, **kwargs)\n</code></pre> <p>               Bases: <code>Safety</code>, <code>ModuleHardware</code></p> <p>Generates Lizard code for hardware safety with automatic enable/disable behavior.</p> <p>The generated code creates <code>enable()</code> and <code>disable()</code> functions that control wheels and all registered <code>SafetyMixin</code> modules. State transitions:</p> <ul> <li>E-stop or bumper triggered \u2192 <code>disable()</code> called</li> <li>E-stop and bumper released while disabled \u2192 <code>enable()</code> called</li> <li>No messages for 1s \u2192 wheels stop</li> <li>No messages for 20s \u2192 full disable (watchdog)</li> </ul>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.SafetyMixin","title":"SafetyMixin","text":"<p>               Bases: <code>ABC</code></p> <p>Mixin for modules that integrate with the safety system.</p> <p>Implement <code>enable_code</code> and <code>disable_code</code> to return Lizard code snippets that get injected into the safety module's <code>enable()</code> and <code>disable()</code> functions.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.SafetySimulation","title":"SafetySimulation","text":"<pre><code>SafetySimulation(\n    *,\n    wheels: Wheels,\n    estop: EStop,\n    bumper: Bumper | None = None,\n    modules: list[SafetyMixin] | None = None\n)\n</code></pre> <p>               Bases: <code>Safety</code>, <code>ModuleSimulation</code></p> <p>Simulated safety module for testing.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.StatusControlHardware","title":"StatusControlHardware","text":"<pre><code>StatusControlHardware(\n    robot_brain: RobotBrain,\n    *,\n    expander: ExpanderHardware,\n    rdyp_pin: int = 39,\n    vdp_pin: int = 39\n)\n</code></pre> <p>               Bases: <code>ModuleHardware</code></p> <p>Reads the status of the robot's power distribution.</p>"},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.TeltonikaRouter","title":"TeltonikaRouter","text":"<pre><code>TeltonikaRouter(url: str, admin_password: str)\n</code></pre> <p>Implements the api of the builtin Teltonika RUT955 router.</p>"},{"location":"reference/feldfreund_devkit/hardware/#events","title":"Events","text":"Name Description <code>CONNECTION_CHANGED</code> Emitted when the connection status changes."},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.TracksHardware","title":"TracksHardware","text":"<pre><code>TracksHardware(\n    config: TracksConfiguration,\n    robot_brain: RobotBrain,\n    estop: EStopHardware,\n    *,\n    can: CanHardware\n)\n</code></pre> <p>               Bases: <code>Wheels</code>, <code>ModuleHardware</code></p> <p>Expands the RoSys wheels hardware to control the Feldfreund's tracked wheels with dual motors.</p>"},{"location":"reference/feldfreund_devkit/hardware/#attributes-properties","title":"Attributes &amp; Properties","text":"Name Type Description <code>linear_acceleration</code> <code>float</code> The maximum linear acceleration rate. <code>linear_deceleration</code> <code>float</code> The maximum linear deceleration rate."},{"location":"reference/feldfreund_devkit/hardware/#feldfreund_devkit.hardware.TracksSimulation","title":"TracksSimulation","text":"<pre><code>TracksSimulation(\n    width: float = 0.5,\n    *,\n    linear_acceleration: float = 2.0,\n    linear_deceleration: float = 0.5\n)\n</code></pre> <p>               Bases: <code>WheelsSimulation</code></p> <p>Simulated tracks with acceleration and deceleration handling.</p>"},{"location":"reference/feldfreund_devkit/hardware/#attributes-properties_1","title":"Attributes &amp; Properties","text":"Name Type Description <code>linear_acceleration</code> <code>float</code> The maximum linear acceleration rate. <code>linear_deceleration</code> <code>float</code> The maximum linear deceleration rate. <code>angular_acceleration</code> <code>float</code> Calculated angular acceleration from linear acceleration using differential drive kinematics. <code>angular_deceleration</code> <code>float</code> Calculated angular deceleration from linear deceleration using differential drive kinematics."},{"location":"reference/feldfreund_devkit/navigation/","title":"navigation","text":""},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.DriveSegment","title":"DriveSegment  <code>dataclass</code>","text":"<pre><code>DriveSegment(\n    *, use_implement: bool = False, stop_at_end: bool = True\n)\n</code></pre> <p>               Bases: <code>PathSegment</code></p> <p>A path segment with implement usage and stop behavior configuration.</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.StraightLineNavigation","title":"StraightLineNavigation","text":"<pre><code>StraightLineNavigation(**kwargs)\n</code></pre> <p>               Bases: <code>WaypointNavigation</code></p> <p>Navigation that drives a straight line for a given length.</p>"},{"location":"reference/feldfreund_devkit/navigation/#attributes-properties","title":"Attributes &amp; Properties","text":"Name Type Description <code>current_segment</code> <code>feldfreund_devkit.navigation.drive_segment.DriveSegment | None</code> Returns the current segment to drive along or None if there are no waypoints left. <code>has_waypoints</code> <code>bool</code> Returns True as long as there are waypoints to drive to. <code>path</code> <code>list</code> Returns the whole planned path."},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation","title":"WaypointNavigation","text":"<pre><code>WaypointNavigation(\n    *,\n    implement: Implement,\n    driver: Driver,\n    pose_provider: PoseProvider,\n    name: str = \"Waypoint Navigation\"\n)\n</code></pre> <p>               Bases: <code>Persistable</code></p> <p>Base class for all waypoint based navigation types.</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation._drive_along_segment","title":"_drive_along_segment  <code>async</code>","text":"<pre><code>_drive_along_segment(\n    *, linear_speed_limit: float = 0.3\n) -&gt; None\n</code></pre> <p>Drive the robot to the next waypoint of the navigation</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation._follow_segment_until","title":"_follow_segment_until  <code>async</code>","text":"<pre><code>_follow_segment_until(target: Point) -&gt; bool\n</code></pre> <p>Drives to a target point along the current spline.</p> <p>:param target: The target point to drive to</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation._remove_segments_behind_robot","title":"_remove_segments_behind_robot","text":"<pre><code>_remove_segments_behind_robot(\n    path_segments: list[DriveSegment],\n    *,\n    completed_percentage: float = 0.99\n) -&gt; list[DriveSegment]\n</code></pre> <p>Create new path(list of segments) starting at the closest segment to the current pose</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation.finish","title":"finish  <code>async</code>","text":"<pre><code>finish() -&gt; None\n</code></pre> <p>Executed after the navigation is done</p>"},{"location":"reference/feldfreund_devkit/navigation/#feldfreund_devkit.navigation.WaypointNavigation.prepare","title":"prepare  <code>async</code>","text":"<pre><code>prepare() -&gt; bool\n</code></pre> <p>Prepares the navigation for the start of the automation</p> <p>Returns true if all preparations were successful, otherwise false.</p>"},{"location":"reference/feldfreund_devkit/navigation/#attributes-properties_1","title":"Attributes &amp; Properties","text":"Name Type Description <code>current_segment</code> <code>feldfreund_devkit.navigation.drive_segment.DriveSegment | None</code> Returns the current segment to drive along or None if there are no waypoints left. <code>has_waypoints</code> <code>bool</code> Returns True as long as there are waypoints to drive to. <code>path</code> <code>list</code> Returns the whole planned path."},{"location":"reference/feldfreund_devkit/navigation/#events","title":"Events","text":"Name Description <code>PATH_GENERATED</code> a new path has been generated(argument: <code>list[DriveSegment]</code>) <code>SEGMENT_STARTED</code> a waypoint has been reached <code>SEGMENT_COMPLETED</code> a waypoint has been reached <code>PATH_COMPLETED</code> the entire path with all its waypoints has been completed"},{"location":"reference/feldfreund_devkit/interface/components/","title":"components","text":""},{"location":"reference/feldfreund_devkit/interface/components/#feldfreund_devkit.interface.components.LogMonitor","title":"LogMonitor","text":"<pre><code>LogMonitor(*, max_lines: int = MAX_LINES)\n</code></pre> <p>               Bases: <code>Persistable</code></p> <p>Persisted log display for notifications with timestamps.</p>"},{"location":"reference/feldfreund_devkit/interface/components/#events","title":"Events","text":"Name Description <code>NEW_LINE</code> a new line was added to the log (argument: line)"},{"location":"reference/feldfreund_devkit/interface/components/#feldfreund_devkit.interface.components.confirm_dialog.ConfirmDialog","title":"ConfirmDialog","text":"<pre><code>ConfirmDialog(\n    text: str = \"Are you sure?\", *, delay: float = 3.0\n)\n</code></pre> <p>               Bases: <code>dialog</code></p> <p>A dialog that asks for confirmation with a delayed yes button.</p>"},{"location":"reference/feldfreund_devkit/interface/components/#attributes-properties","title":"Attributes &amp; Properties","text":"Name Type Description <code>classes</code> <code>Classes[Self]</code> The classes of the element. <code>client</code> <code>Client</code> The client this element belongs to. <code>html_id</code> <code>str</code> The ID of the element in the HTML DOM. <code>is_deleted</code> <code>bool</code> Whether the element has been deleted. <code>is_ignoring_events</code> <code>bool</code> Return whether the element is currently ignoring events. <code>parent_slot</code> <code>Slot | None</code> The parent slot of the element. <code>props</code> <code>Props[Self]</code> The props of the element. <code>style</code> <code>Style[Self]</code> The style of the element. <code>submitted</code> <code>Event</code> An event that is set when the dialog is submitted."},{"location":"reference/feldfreund_devkit/interface/components/#feldfreund_devkit.interface.components.header_bar.HeaderBar","title":"HeaderBar","text":"<pre><code>HeaderBar(\n    pages: dict[str, str] | None = None,\n    *,\n    estop: EStop | None = None,\n    bms: Bms | None = None,\n    bms_url: str | None = None,\n    teltonika_router: TeltonikaRouter | None = None\n)\n</code></pre> <p>Navigation header with logo, page links, and status indicators.</p>"},{"location":"reference/feldfreund_devkit/interface/components/#feldfreund_devkit.interface.components.status_bulb.StatusBulb","title":"StatusBulb","text":"<pre><code>StatusBulb(value: bool = False)\n</code></pre> <p>               Bases: <code>ValueElement</code></p> <p>A circular LED-style indicator that changes color based on value.</p>"},{"location":"reference/feldfreund_devkit/interface/components/#attributes-properties_1","title":"Attributes &amp; Properties","text":"Name Type Description <code>classes</code> <code>Classes[Self]</code> The classes of the element. <code>client</code> <code>Client</code> The client this element belongs to. <code>html_id</code> <code>str</code> The ID of the element in the HTML DOM. <code>is_deleted</code> <code>bool</code> Whether the element has been deleted. <code>is_ignoring_events</code> <code>bool</code> Return whether the element is currently ignoring events. <code>parent_slot</code> <code>Slot | None</code> The parent slot of the element. <code>props</code> <code>Props[Self]</code> The props of the element. <code>style</code> <code>Style[Self]</code> The style of the element."},{"location":"tutorials/imu_calibration/","title":"Imu Calibration","text":"<p>The IMU is not installed in its intended orientation, that is why we have to find the correct values. The standard coordinate frame of our robots is a right-handed one where X is forward, Y is left and Z is upward. The built-in IMUs orientation is X-left, Y-down and Z-backward, therefore a roll rotation of -90\u00b0 and a yaw rotation of 90\u00b0 is needed for a Robot Brain in its default configuration, where the socket connectors show backwards. Older robots like U4 will need an additional yaw rotation of 90\u00b0 afterwards, because their Robot Brains are built in sideways.</p> <p>Here is a short Python script to generate the needed configuration:</p> <pre><code>#!/usr/bin/env python3\nimport numpy as np\nfrom rosys.geometry import Rotation\n\nbase_rotation = Rotation.from_euler(np.deg2rad(-90), 0, np.deg2rad(90))\nprint(f'{base_rotation=}')\n\nroll = np.deg2rad(0.0)\npitch = np.deg2rad(0.0)\ncorrection = Rotation.from_euler(roll, pitch, 0.0)\nprint(f'{correction=}')\n\ncomplete_correction = correction * base_rotation\nprint(f'{complete_correction=}')\n\nprint('\\nCode snippet for your robot\\'s configuration:')\nprint(f'imu=Imu(offset_rotation=Rotation.from_euler({complete_correction.roll:.6f}, {complete_correction.pitch:.6f}, {complete_correction.yaw:.6f}))')\n</code></pre> <p>Steps:</p> <ol> <li>Find the correct base orientation of your IMU.    If your Feldfreund has the standard configuration, you can use this as a starting point:    <code>Imu(offset_rotation=Rotation.from_euler(-1.570796, -0.000000, 1.570796))</code></li> <li>Roll and pitch your robot manually to check if the configuration is correct and the axes are correctly rotated.</li> <li>Place your robot on a level surface and check the IMU's current values on the development page</li> <li>Put the shown values for roll and pitch in the script above.    That will generate your final configuration values.    Note, that IMU values have some noise, so your configuration won't be perfect.</li> </ol>"},{"location":"tutorials/odrive_calibration/","title":"ODrive Calibration","text":""},{"location":"tutorials/odrive_calibration/#flashing-odrive","title":"Flashing ODrive","text":"<p>To flash an ODrive it has to be put into DFU Mode. For this there is a switch on the black ODrive board. This switch has to be put into the DFU setting. Following this, the whole board needs to be power cycled (Including RdyP and the battery connection). Then the ODrive needs to be connected to the Robot Brain using a micro-USB cable.</p> <p>Now, from the odrive directory, the following command can be run. This will flash the STM chip with the newest firmware.</p> <pre><code>./flash_odrive.sh fw-v5.6-feldfreund/ODriveFirmware.bin\n</code></pre>"},{"location":"tutorials/odrive_calibration/#calibrating-odrive","title":"Calibrating ODrive","text":"<p>To calibrate the ODrives, they have to be in the run mode(switch with DFU and run). The normal Feldfreund Lizard script will interfere with the calibration script. In order to prevent this the <code>calibration.liz</code> needs to be configured. This can be done in the <code>&lt;path_to_fodler&gt;/lizard</code> folder with the command:</p> <pre><code>./configure.py &lt;path_to_file&gt;/calibration.liz &lt;ESP_port&gt;\n</code></pre> <p>If this is failing, make sure there are no other serial connections running to the ESP.</p> <p>Before starting the calibration make sure, that the tracks do not touch the ground and the ODrive is connected to the Robot Brain using the micro-USB cable. Then for the right track run:</p> <pre><code>python3 calibrate_two_motors_r.py\n</code></pre> <p>and for the left track:</p> <pre><code>python3 calibrate_two_motors_l.py\n</code></pre> <p>If the calibration does not work calling it with <code>sudo</code> can help. These scripts will set the motor parameters and start the calibration of the hall sensors. When you are done, don't forget to reconfigure the ESP with your Feldfreund code.</p>"},{"location":"tutorials/odrive_calibration/#further-debugging","title":"Further debugging","text":"<p>Further debugging can be done using the <code>odrivetool</code>. While the ODrive is connected via USB the tool can be started from the command line. For further documentation reference the ODrive documentation.</p>"},{"location":"tutorials/tutorials/","title":"Tutorials","text":"<p>Welcome to the Feldfreund tutorials section! Here you'll find step-by-step guides to help you get the most out of your Feldfreund robot.</p> <ul> <li>IMU calibration - How to determine the correct rotation for the ImuConfiguration</li> <li>ODrive calibration - Let the ODrive motor controllers calibrate themselves</li> </ul>"}]}